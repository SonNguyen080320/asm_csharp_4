@model asm_rewrite.Models.Product

@{
    Layout = "_AdminLayout";
    ViewData["Title"] = "Thêm sản phẩm";

    var categories = ViewBag.categories as List<Category>;
}

<div class="mb-4">
    <a asp-controller="admin" asp-action="products">Quay lại</a>
</div>

<form asp-action="addProduct" method="post" enctype="multipart/form-data">
    <div class="form-row">
        <div class="col-md-4 mb-3">
            <label for="name">Tên*</label>
            <input type="text" class="form-control" asp-for="Name" required>
        </div>

        <div class="col-md-4 mb-3">
            <label for="alias">Alias*</label>
            <input type="text" class="form-control" asp-for="Alias" required>
        </div>

        <div class="col-md-4 mb-3">
            <label for="name">Danh mục*</label>
            <select class="custom-select mb-3" asp-for="CategoryId" required>
                <option selected hidden value="">Chọn danh mục</option>
                @if (categories != null)
                {
                    foreach (Category category in categories)
                    {
                        <option value="@category.Id">@category.Name</option>
                    }
                }
            </select>
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-4 mb-3">
            <label for="import-price">Giá nhập*</label>
            <input type="number" class="form-control" asp-for="ImportPrice" required>
        </div>

        <div class="col-md-4 mb-3">
            <label for="price">Giá bán*</label>
            <input type="number" class="form-control" asp-for="Price" required>
        </div>

        <div class="col-md-4 mb-3">
            <label for="price">Giá giảm</label>
            <input type="number" class="form-control" asp-for="HotPrice">
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-4 mb-3">
            <label for="brand">Thương hiệu*</label>
            <input type="text" class="form-control" asp-for="Brand" required>
        </div>

        <div class="col-md-4 mb-3">
            <label for="quantity">Số lượng*</label>
            <input type="number" class="form-control" asp-for="Quantity" required>
        </div>

        <div class="col-md-4 mb-3">
            <div class="d-flex justify-content-between">
                <span>Sản phẩm nổi bật</span>
                @*@Html.CheckBox("IsTop", false)*@
                <input type="checkbox" asp-for="IsTop"/>
            </div>

            <div class="d-flex justify-content-between">
                <span>Bán chạy</span>
                @*@Html.CheckBox("IsBestSeller", false)*@
                <input type="checkbox" asp-for="IsBestSeller" />
            </div>

            <div class="d-flex justify-content-between">
                <span>Miễn phí vận chuyển</span>
                @*@Html.CheckBox("IsFreeShip", false)*@
                <input type="checkbox" asp-for="IsFreeShip" />
            </div>
        </div>
    </div>

    <div class="form-row">
        <div class="col-md-4 mb-3">
            <label for="quantity">Hình ảnh*</label>

            <div class="input-group">
                <div class="custom-file">
                    <input class="custom-file-input" asp-for="ImageFile" accept="image/*" id="ImageFile" required>
                    <label class="custom-file-label text-truncate" for="ImageFile">Chọn ảnh</label>
                </div>
            </div>

            @*<img height="200" width="200" src="~/images/Bàn-phím-cơ-Logitech-Gaming-G813-removebg-preview.png" alt="product_image" />*@
            <img id="customFileImg" height="120" width="120" src="~/images/default-product.png" alt="Ảnh mặc định" />
        </div>

        <div class="col-md-4 mb-3">
            <label for="quantity">Mô tả*</label>
            <textarea class="form-control" id="textAreaExample1" rows="4" asp-for="Description"></textarea>
        </div>

        <div class="col-md-4 mb-3">
            <div>Trạng thái</div>

            <div class="form-check-inline">
                @*@Html.RadioButton("IsDeleted", false, true)*@
                <input type="radio" asp-for="IsDeleted" checked value=false/>
                <label class="form-check-label ml-2" for="not-sell">
                    Bán
                </label>
            </div>

            <div class="form-check-inline">
                @*@Html.RadioButton("IsDeleted", true)*@
                <input type="radio" asp-for="IsDeleted" value=true />
                <label class="form-check-label ml-2" for="selling">
                    Không bán
                </label>
            </div>
        </div>
    </div>

    <div class="text-center">
        <button class="btn btn-primary w-50" style="padding: 10px 0; font-weight: bolder;" type="submit">Thêm</button>
    </div>
</form>

@section scripts{
    <script src="~/lib/jquery/dist/jquery.min.js"></script>

    <script>
        // Add the following code if you want the name of the file appear on select
        $(".custom-file-input").on("change", function () {
            var fileName = $(this).val().split("\\").pop();
            $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
        });

        function readURL(input) {
            var file = document.getElementById("ImageFile");
            var fileName = file.value;

            var idxDot = fileName.lastIndexOf(".") + 1;
            var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();

            if (extFile != "jpg" && extFile != "png") {
                alert("Chỉ chọn ảnh jpg hoặc png");
                file.value = null;
                return;
            }

            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#customFileImg')
                        .attr('src', e.target.result);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
}  